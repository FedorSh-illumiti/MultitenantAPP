{"version":3,"file":"cat-service.js","sourceRoot":"","sources":["../src/cat-service.ts"],"names":[],"mappings":";;;;;AACA,mEAA2C;AAC3C,sDAAqC;AACrC,0EAA6C;AAG7C,kBAAe,CAAC,GAAY,EAAE,EAAE;IAE5B,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAC,GAAG,EAAE,EAAE;QAC1B,MAAM,GAAG,GAAG,gBAAa,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;QACjD,IAAI;YACD,OAAO,MAAM,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;SAC/B;QAAC,OAAO,KAAK,EAAE;YACZ,IAAI,KAAK,YAAY,uBAAQ,EAAE;gBAC3B,KAAK,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;aAChC;iBACI;gBACD,uBAAQ,CAAC,iBAAiB,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;aAC1C;SACJ;IACL,CAAC,CAAC,CAAA;IAGF,GAAG,CAAC,MAAM,CAAC,GAAG,EAAC,GAAG,EAAE,GAAG,CAAA,EAAE;QACrB,IAAI,kBAAQ,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAC/B,CAAC,CAAC,CAAC;AAEP,CAAC,CAAA","sourcesContent":["import { Service } from \"@sap/cds/apis/services\";\nimport InitHndl from \"./handlers/initHndl\";\nimport SystemFactory from \"./system\";\nimport ErrorHnd from \"./utils/errorHandling\";\n\n\nexport default (srv: Service) => {\n\n    srv.on('*', '*', async req  => {\n        const res = SystemFactory.getSystemInstance(req);\n        try {\n           return await res.handle(req);\n        } catch (error) {\n            if (error instanceof ErrorHnd) {\n                error.raiseServiceError(req);\n            }\n            else {\n                ErrorHnd.raiseGeneralError(req, error);\n            }\n        }\n    })\n\n\n    srv.before('*','*', req=>{\n        new InitHndl().before(req);\n    });\n\n}"]}